{% extends "base.html" %}

{% block head %}
{{ super() }}
<meta name="description"
      content="Derbies from all around the world sorted by the date of next meeting. Never miss another El ClÃ¡sico!"/>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
$(document).ready(function() {
  $('#fixtures_table').DataTable({
    "ajax": {
      "url": "/fixtures",
      "type": "POST"
    },
    "columns": [
    { "data": "title"},
    { "data": "date"},
    { "data": "teams"},
    { "data": "competition"},
    { "data": "country"},
    { "data": "wikipedia_url"},

    { "data": "country"}  // placeholder
    ],
    "order": [
      [1, "asc"]
    ],
    "responsive": {
      "details": {
        "renderer": function(api, rowIdx, columns) {
          // Show hidden columns in row details
          var data = $.map(columns, function(col, i) {
            if(i == 6){ return; }
            return col.hidden ?
              '<tr><td>' + col.title + ':</td> ' +
              '<td>' + col.data + '</td></tr>' :
              '';
          }).join('');

          // Generate a table
          data = $('<table width="100%"/>').append(data).prop('outerHTML');

          return data;
        }
      }
    },
    "scrollY": "50vh",
    "scrollCollapse": true,
    "paging": false,
    "columnDefs": [
        // not displayed directly, only upon clicking on '+' button
        {
            "className": 'none',
            "targets": [ 4, 5 ]
        },

        // placeholder to always display '+' button
        {
            "className": 'none',
            "targets": [ 6 ]
        }
    ]
  });
})


</script>
{% endblock %}

{% block app_content %}
<table id="fixtures_table" class="display table table-dark table-striped table-hover">
    <thead>
    <tr>
        <th class="text-warning"><i class="fas fa-futbol"></i> &nbsp;Title</th>
        <th class="text-warning"><i class="fas fa-calendar-day"></i> &nbsp;Date</th>
        <th class="text-warning"><i class="fas fa-running"></i> &nbsp;Teams</th>
        <th class="text-warning"><i class="fas fa-calendar-day"></i> &nbsp;Competition</th>
        <th class="text-warning"><i class="fas fa-calendar-day"></i> &nbsp;Country</th>
        <th class="text-warning"><i class="fas fa-globe"></i> &nbsp;Wikipedia URL</th>
        <th></th>
    </tr>
    </thead>
</table>
<p class="text-warning">Last updated: {{ last_updated }}</p>
{% endblock %}

